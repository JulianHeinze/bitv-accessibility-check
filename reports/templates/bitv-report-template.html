<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Accessibility-Report</title>
  <style>
    body { font-family: sans-serif; margin: 1rem; }
    h1 { text-align: center; margin-bottom: 2rem; }
    section { margin-bottom: 3rem; }
    table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; font-size: 0.9rem; }
    th { background: #f0f0f0; }
    .critical { background: #f8d7da; }
    .serious  { background: #fff3cd; }
    .moderate { background: #d1ecf1; }
    .pass     { background: #e6ffed; }
    .fail     { background: #ffe6e6; }
    .manual   { background: #fff8e6; }
  </style>
</head>
<body>
  <h1>Accessibility-Report</h1>

  {{!-- Für jede Seite ein eigenes Section --}}
  {{#each pages}}
    <section>
      <h2>{{url}}</h2>

      {{#if error}}
        <p style="color: red;">Fehler: {{error}}</p>
      {{else}}
        <p>
          Summary:
          <span class="critical">kritisch: {{summary.critical}}</span>,
          <span class="serious">erheblich: {{summary.serious}}</span>,
          <span class="moderate">moderat: {{summary.moderate}}</span>
        </p>

        {{#if violations.length}}
          <table>
            <thead>
              <tr><th>Impact</th><th>Beschreibung</th><th>Elemente</th></tr>
            </thead>
            <tbody>
              {{#each violations}}
                <tr class="{{impact}}">
                  <td>{{impact}}</td>
                  <td>{{description}}</td>
                  <td>{{#each nodes}}<div>{{{html}}}</div>{{/each}}</td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        {{/if}}

        <h3>WCAG-Checkliste</h3>
<table>
  <thead>
    <tr><th>SC</th><th>Name</th><th>Status</th></tr>
  </thead>
  <tbody>
    {{#each wcag}}
      <tr class="{{#if (eq status '✓ erfüllt')}}pass{{else if (eq status '✗ nicht erfüllt')}}fail{{else}}manual{{/if}}">
        <td>{{id}}</td>
        <td>{{name}}</td>
        <td>{{status}}</td>
      </tr>
    {{/each}}
  </tbody>
</table>

      {{/if}}

    </section>
  {{/each}}

</body>
</html>
